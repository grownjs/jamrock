<script>
  import { method } from 'jamrock/conn';
</script>

<script scoped>
  import Jamrock from 'jamrock';
</script>

<script type="module">
  import { mount } from 'somedom';

  /* global app */
  Jamrock.ready(req => {
    while (app.firstChild) app.removeChild(app.firstChild);

    if (req.initial) {
      mount(app, [['h1', null, 'It works. (', req.method, ')']]);
    } else {
      mount(app, [['h1', null, Math.random(), ' (', req.method, ')']]);
    }
  });
</script>

<div id="app">Loading...</div>

<form method="post" @async>
  <button type="submit">{method}</button>
</form>
