<script>
  import { getContext, useFragment } from 'jamrock/hooks';

  export let value = -1;

  getContext('root').children.push(value);

  const channel = `example-${value}`;

  function* stuff() {
    // nothing yet
  }

  function getData() {
    return Math.random();
  }

  useFragment('test', channel, getData, { stuff });
</script>
{value}
<slot />
<fragment id="test" key={channel}>
  {#each stuff as item}
    {item}
  {/each}
</fragment>
